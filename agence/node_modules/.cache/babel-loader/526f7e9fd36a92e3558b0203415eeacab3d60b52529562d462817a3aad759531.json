{"ast":null,"code":"var _s = $RefreshSig$();\nimport axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nconst api = (url, payload) => {\n  _s();\n  const [data, setData] = useState(null);\n  const [error, setError] = useState(\"\");\n  const [loaded, setLoaded] = useState(false);\n  useEffect(() => {\n    if (localStorage.getItem('access_token') === null) {\n      window.location.href = '/login';\n    } else {\n      (async () => {\n        try {\n          const token = localStorage.getItem('access_token');\n          const {\n            data\n          } = await axios.post(+'famille/', {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n        } catch (e) {\n          console.log('not auth' + e);\n        }\n      })();\n    }\n    ;\n  }, []);\n  return {\n    data,\n    error,\n    loaded\n  };\n};\n_s(api, \"zGwXzhgVyshl1rTF0tnC+41LcHg=\");\nexport default api;","map":{"version":3,"names":["axios","useEffect","useState","api","url","payload","_s","data","setData","error","setError","loaded","setLoaded","localStorage","getItem","window","location","href","token","post","headers","Authorization","e","console","log"],"sources":["/home/samuel/Documents/partage/fpem/recencement/agence/src/services/api.js"],"sourcesContent":["import axios from \"axios\";\nimport { useEffect, useState } from \"react\";\n\nconst api = (url, payload) => {\n    const [data, setData] = useState(null);\n    const [error, setError] = useState(\"\");\n    const [loaded, setLoaded] = useState(false);\n  \n    useEffect(() => {\n        if(localStorage.getItem('access_token') === null){                   \n            window.location.href = '/login'\n        }\n        else{\n\n         (async () => {\n           try {\n            const token = localStorage.getItem('access_token')\n             const {data} = await axios.post(   \n                             + 'famille/', {\n                            headers: {\n                                Authorization: `Bearer ${token}`\n                                }}\n                           );\n         \n          } catch (e) {\n            console.log('not auth'+ e)\n          }\n         })()};\n\n    }, []);\n  \n    return { data, error, loaded };\n  };\n\n  export default api;"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAE3C,MAAMC,GAAG,GAAGA,CAACC,GAAG,EAAEC,OAAO,KAAK;EAAAC,EAAA;EAC1B,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGN,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACO,KAAK,EAAEC,QAAQ,CAAC,GAAGR,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACS,MAAM,EAAEC,SAAS,CAAC,GAAGV,QAAQ,CAAC,KAAK,CAAC;EAE3CD,SAAS,CAAC,MAAM;IACZ,IAAGY,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,KAAK,IAAI,EAAC;MAC7CC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;IACnC,CAAC,MACG;MAEH,CAAC,YAAY;QACX,IAAI;UACH,MAAMC,KAAK,GAAGL,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;UACjD,MAAM;YAACP;UAAI,CAAC,GAAG,MAAMP,KAAK,CAACmB,IAAI,CACf,CAAE,UAAU,EAAE;YACfC,OAAO,EAAE;cACLC,aAAa,EAAG,UAASH,KAAM;YAC/B;UAAC,CAAC,CACN;QAElB,CAAC,CAAC,OAAOI,CAAC,EAAE;UACVC,OAAO,CAACC,GAAG,CAAC,UAAU,GAAEF,CAAC,CAAC;QAC5B;MACD,CAAC,GAAG;IAAA;IAAC;EAEV,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IAAEf,IAAI;IAAEE,KAAK;IAAEE;EAAO,CAAC;AAChC,CAAC;AAACL,EAAA,CA7BEH,GAAG;AA+BP,eAAeA,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}